# ========================================
# SISTEMA ESTOQUE HSI - VARIÁVEIS DE AMBIENTE
# ========================================
# Copie este arquivo para .env e ajuste os valores

# ----------------------------------------
# Application
# ----------------------------------------
APP_PORT=3000
APP_BASE_URL=http://localhost:3000
NODE_ENV=development

# ----------------------------------------
# API
# ----------------------------------------
API_PORT=3001
API_PREFIX=/api/v1

# ----------------------------------------
# Database (PostgreSQL)
# ----------------------------------------
# Development (local)
DATABASE_URL=postgresql://estoque_user:estoque_pass@localhost:5432/estoque_hsi

# Production (Docker - usado dentro do container)
DATABASE_URL_DOCKER=postgresql://estoque_user:estoque_pass@db:5432/estoque_hsi

# ⚠️ PRODUÇÃO: Use credenciais fortes e únicas
# DATABASE_URL=postgresql://USER:STRONG_PASSWORD@HOST:5432/DATABASE

# ----------------------------------------
# Redis (para filas de jobs)
# ----------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379

# ⚠️ PRODUÇÃO: Configure senha se necessário
# REDIS_URL=redis://:PASSWORD@HOST:6379

# ----------------------------------------
# JWT Authentication
# ----------------------------------------
# ⚠️ CRÍTICO: Em produção, use string aleatória forte de 64+ caracteres
# Gere com: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=change_me_in_production_use_strong_random_string
JWT_EXPIRES_IN=7d

# Exemplo de JWT_SECRET seguro para produção:
# JWT_SECRET=a3f8b2c7d9e1f4a6b8c0d2e5f7a9b1c3d5e7f9a1b3c5d7e9f1a3b5c7d9e1f3a5b7c9d1e3f5a7b9c1d3e5f7a9b1c3d5e7

# ----------------------------------------
# Storage (Upload de arquivos)
# ----------------------------------------
STORAGE_DIR=./uploads
STORAGE_MAX_SIZE_MB=50

# ⚠️ PRODUÇÃO: Configure S3 ou storage em nuvem
# AWS_S3_BUCKET=estoque-hsi-uploads
# AWS_S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key

# ----------------------------------------
# SMTP (Email - opcional)
# ----------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@estoque-hsi.local

# Exemplo para Gmail:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=seu-email@gmail.com
# SMTP_PASS=sua-senha-app
# SMTP_FROM=Estoque HSI <seu-email@gmail.com>

# ----------------------------------------
# Observabilidade
# ----------------------------------------
# Sentry para tracking de erros
SENTRY_DSN=

# Nível de log (error, warn, info, debug)
LOG_LEVEL=info

# ⚠️ PRODUÇÃO: Configure Sentry para monitoramento
# SENTRY_DSN=https://your-key@sentry.io/your-project

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
# TTL em segundos (padrão: 60s)
RATE_LIMIT_TTL=60

# Máximo de requisições por TTL (padrão: 100)
RATE_LIMIT_MAX=100

# ⚠️ PRODUÇÃO: Ajuste conforme necessidade
# RATE_LIMIT_TTL=60
# RATE_LIMIT_MAX=300

# ----------------------------------------
# CORS (Cross-Origin Resource Sharing)
# ----------------------------------------
# Origens permitidas (separadas por vírgula)
# CORS_ORIGIN=http://localhost:3000

# ⚠️ PRODUÇÃO: Liste domínios autorizados
# CORS_ORIGIN=https://estoque.hospital.com.br,https://admin.hospital.com.br

# ----------------------------------------
# FRONTEND (Next.js)
# ----------------------------------------
# URL da API para o frontend
# NEXT_PUBLIC_API_URL=http://localhost:3001/api/v1

# ⚠️ PRODUÇÃO: Use URL pública da API
# NEXT_PUBLIC_API_URL=https://api.estoque.hospital.com.br/api/v1

# ----------------------------------------
# HTTPS (Produção)
# ----------------------------------------
# ⚠️ PRODUÇÃO: Configure certificados SSL
# SSL_KEY_PATH=/path/to/private.key
# SSL_CERT_PATH=/path/to/certificate.crt
# SSL_CA_PATH=/path/to/ca-bundle.crt

# ========================================
# CHECKLIST DE SEGURANÇA PARA PRODUÇÃO
# ========================================
# [ ] Gerar JWT_SECRET forte e aleatório
# [ ] Configurar DATABASE_URL com credenciais fortes
# [ ] Ativar HTTPS (SSL/TLS)
# [ ] Configurar CORS_ORIGIN com domínios específicos
# [ ] Ativar Sentry para monitoramento (SENTRY_DSN)
# [ ] Configurar SMTP para notificações por email
# [ ] Ajustar RATE_LIMIT conforme necessidade
# [ ] Configurar backup automático do banco de dados
# [ ] Revisar logs de segurança (LOG_LEVEL=warn ou error)
# [ ] Implementar firewall e regras de segurança de rede
# [ ] Ativar 2FA para usuários admin
# [ ] Configurar storage em nuvem (S3) para uploads

# ========================================
# NOTAS IMPORTANTES
# ========================================
# 1. NUNCA commite o arquivo .env no Git
# 2. Adicione .env no .gitignore
# 3. Use .env.example apenas como template
# 4. Rotacione JWT_SECRET periodicamente em produção
# 5. Mantenha backup das variáveis de ambiente de produção
# 6. Use secrets management em cloud (AWS Secrets, Azure Key Vault)

